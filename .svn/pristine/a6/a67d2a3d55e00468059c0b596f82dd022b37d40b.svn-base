<?php
function main() {
	try {
		$pdo = new PDO ( 'mysql:host=localhost;port=3306;dbname=clinic;', 'root', '' );
		$pdo->setAttribute ( PDO::ATTR_CASE, PDO::CASE_NATURAL );
		$pdo->setAttribute ( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
		
		createVisit ( $pdo, 1, 2, 'Elephant on the head', 'Sore hip', 'Smoke from the ears' ); 
		createVisit ( $pdo, 2, 5, 'Dust bunnies in the ears', 'Dizzy', 'Nausea');
		createVisit ( $pdo, 3, 1, 'Cannot stop laughing', 'Cannot stop dancing', 'Orange skin' ); 
		createVisit ( $pdo, 4, 2, 'Ate a bad potato', 'Rickrolls everyone', 'Rolls on the floor' );
	} catch ( PDOException $ex ) {
		echo $ex->getMessage ();
	} finally {
		unset ( $pdo );
	}
}
function createVisit($pdo, $patientId, $code, $primaryComplaint, $symptom1, $symptom2) {
	$query = "INSERT INTO visit(patient_id, code, primary_complaint, symptom1, symptom2)" .
			"VALUES(?,?,?,?,?)";
	
	$stmt = $pdo->prepare ( $query );
	
	$stmt->bindParam ( 1, $patientId );
	$stmt->bindParam ( 2, $code );
	$stmt->bindParam ( 3, $primaryComplaint );
	$stmt->bindParam ( 4, $symptom1 );
	$stmt->bindParam ( 5, $symptom2 );
	
	$stmt->execute ();
}

main ();
?>