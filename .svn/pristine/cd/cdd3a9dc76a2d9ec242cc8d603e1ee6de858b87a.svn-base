<?php

if (! defined ( 'BASEPATH' ))
	exit ( 'No direct script access allowed' );
class Examination extends CI_Controller {
	
	 private $queue1cont;
	 private $queue2cont;
	 private $queue3cont;
	 private $queue4cont;
	 private $queue5cont;
	
	
	public function __construct() {
		parent::__construct ();
		
		$this->load->model ( 'examination_model' );
		$this->load->model ( 'Patient' );
		$this->load->model ( 'Visit' );
		$this->load->driver('session');
		$this->load->helper('form');
		
		$this->positionPattern = array(2, 3, 2, 4, 3, 2, 5, 2, 3, 4);
		$this->positionMax = 10;
		
	}
	
	
	public function getNextPatient(){
		echo "testing";
	}
	
	private function sendData(){
		
	}
	
	private function dequeue(){
		
	}
	
	public function index() {
		$data ['pagetitle'] = 'Clinic - Examination';
		$user_id = $this->session->userdata ( 'user_id' );
		$user_priv = $this->session->userdata ( 'user_priv' );
		
		
		//if ($user_priv != "3") {
		//	redirect ( '/home', 'refresh' );
		//}
		
		$amount1 = $this -> examination_model -> getQueueCount('1');
		$amount2 = $this -> examination_model -> getQueueCount('2');
		$amount3 = $this -> examination_model -> getQueueCount('3');
		$amount4 = $this -> examination_model -> getQueueCount('4');
		$amount5 = $this -> examination_model -> getQueueCount('5');
		$a = '1';
		$b = '2';
		$c = '3';
		$d = '4';
		$e = '5';
		$data ['queue1'] = $amount1;
		$data ['queue2'] = $amount2;
		$data ['queue3'] = $amount3;
		$data ['queue4'] = $amount4;
		$data ['queue5'] = $amount5;
		//$this->load->view ( 'examination', $data );
		$this->load->template('examination/examination', $data);
	}
}

/**
 * INSERT INTO PATIENT(RAMQ_ID,LAST_NAME,FIRST_NAME,PHONE_NUM_HOME,PHONE_NUM_EMERGENCY,PRIMARY_PHYSICIAN
    ,existing_conditions,medication1,medication2,medication3) VALUES(123,"Ram","John","5142222222","5142332222","Dr.Mario","Concussion","","","");
    
    INSERT INTO PATIENT(RAMQ_ID,LAST_NAME,FIRST_NAME,PHONE_NUM_HOME,PHONE_NUM_EMERGENCY,PRIMARY_PHYSICIAN
    ,existing_conditions,medication1,medication2,medication3) VALUES(123,"Smith","Benoit","5142456592","5142332652","Dr.Luigi","Concussion","","","");
    
    INSERT INTO PATIENT(RAMQ_ID,LAST_NAME,FIRST_NAME,PHONE_NUM_HOME,PHONE_NUM_EMERGENCY,PRIMARY_PHYSICIAN
    ,existing_conditions,medication1,medication2,medication3) VALUES(123,"Woods","Marcus","5142561222","5142349122","Dr.Wario","Concussion","","","");
    
    INSERT INTO PATIENT(RAMQ_ID,LAST_NAME,FIRST_NAME,PHONE_NUM_HOME,PHONE_NUM_EMERGENCY,PRIMARY_PHYSICIAN
    ,existing_conditions,medication1,medication2,medication3) VALUES(123,"Laten","Bio","5119478222","5142163422","Dr.Sahib","Concussion","","","");
CREATE TABLE IF NOT EXISTS user (
	`user_id` int auto_increment PRIMARY KEY,
	`hashed_password` varchar(255) NOT NULL,
	`invalid_login_counter` int default 0,
	`privilege_level` int default 1
	/* privilege_level possible values:
	 * 1 = reception
	 * 2 = triage
	 * 3 = nurse
	 * 4 = admin
INSERT INTO USERS(hashed_password,privilege_level) values ("funfun",3);
 * 
 */
/* End of file examinationCTL.php */